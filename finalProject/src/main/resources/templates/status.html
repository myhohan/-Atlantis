<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>배송 현황 - LogiSystem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-7xl mx-auto px-4 py-8">
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">택배 접수 현황</h1>
            <p class="text-gray-600">등록된 택배의 현재 상태를 확인하세요</p>
        </div>

        <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="relative">
                    <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                    <input type="text" id="searchInput" placeholder="송장번호, 발송인, 수령인 검색..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
                </div>
                <div class="relative">
                    <i data-lucide="filter" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                    <select id="statusFilter" class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
                        <option value="all">전체</option>
                        <option value="pending">접수대기</option>
                        <option value="processing">처리중</option>
                        <option value="shipping">배송중</option>
                        <option value="delivered">배송완료</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6" id="statusSummary">
            </div>

        <div class="bg-white rounded-lg shadow-sm overflow-hidden">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">송장번호</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">발송인</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">수령인</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">목적지</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">상태</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">접수일</th>
                    </tr>
                </thead>
                <tbody id="parcelTableBody" class="bg-white divide-y divide-gray-200">
                    </tbody>
            </table>
        </div>
    </div>

    <script>
        const parcels = [
            { id: '1', trackingNumber: 'PKG-2024-001', sender: '김철수', receiver: '이영희', status: 'delivered', date: '2024-01-10', destination: '서울시 강남구' },
            { id: '2', trackingNumber: 'PKG-2024-002', sender: '박민수', receiver: '정수진', status: 'shipping', date: '2024-01-11', destination: '부산시 해운대구' },
            { id: '3', trackingNumber: 'PKG-2024-003', sender: '최지우', receiver: '강동원', status: 'processing', date: '2024-01-12', destination: '인천시 남동구' },
            { id: '4', trackingNumber: 'PKG-2024-004', sender: '홍길동', receiver: '김민지', status: 'pending', date: '2024-01-13', destination: '대전시 유성구' },
        ];

        function getStatusInfo(status) {
            const map = {
                delivered: { text: '배송완료', color: 'bg-green-100 text-green-800', icon: 'check-circle', iconColor: 'text-green-600' },
                shipping: { text: '배송중', color: 'bg-blue-100 text-blue-800', icon: 'truck', iconColor: 'text-blue-600' },
                processing: { text: '처리중', color: 'bg-yellow-100 text-yellow-800', icon: 'clock', iconColor: 'text-yellow-600' },
                pending: { text: '접수대기', color: 'bg-gray-100 text-gray-800', icon: 'package', iconColor: 'text-gray-600' },
                cancelled: { text: '취소됨', color: 'bg-red-100 text-red-800', icon: 'x-circle', iconColor: 'text-red-600' }
            };
            return map[status] || map.pending;
        }

        function render() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filterStatus = document.getElementById('statusFilter').value;

            const filtered = parcels.filter(p => {
                const matchesSearch = p.trackingNumber.toLowerCase().includes(searchTerm) || 
                                      p.sender.toLowerCase().includes(searchTerm) || 
                                      p.receiver.toLowerCase().includes(searchTerm);
                const matchesFilter = filterStatus === 'all' || p.status === filterStatus;
                return matchesSearch && matchesFilter;
            });

            // 테이블 렌더링
            const tbody = document.getElementById('parcelTableBody');
            tbody.innerHTML = filtered.map(p => {
                const info = getStatusInfo(p.status);
                return `
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap flex items-center">
                        <i data-lucide="${info.icon}" class="w-5 h-5 ${info.iconColor} mr-2"></i>
                        <span class="text-sm font-medium text-gray-900">${p.trackingNumber}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${p.sender}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${p.receiver}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${p.destination}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${info.color}">${info.text}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${p.date}</td>
                </tr>`;
            }).join('');
            
            // 요약 카드 업데이트 (전체 데이터 기준)
            const counts = { all: parcels.length, pending: 0, shipping: 0, delivered: 0 };
            parcels.forEach(p => counts[p.status] = (counts[p.status] || 0) + 1);
            
            document.getElementById('statusSummary').innerHTML = `
                <div class="bg-white rounded-lg shadow-sm p-4"><div class="text-sm text-gray-600">전체</div><div class="text-2xl font-bold">${counts.all}</div></div>
                <div class="bg-white rounded-lg shadow-sm p-4"><div class="text-sm text-gray-600">접수대기</div><div class="text-2xl font-bold">${counts.pending || 0}</div></div>
                <div class="bg-white rounded-lg shadow-sm p-4"><div class="text-sm text-gray-600">배송중</div><div class="text-2xl font-bold text-blue-600">${counts.shipping || 0}</div></div>
                <div class="bg-white rounded-lg shadow-sm p-4"><div class="text-sm text-gray-600">배송완료</div><div class="text-2xl font-bold text-green-600">${counts.delivered || 0}</div></div>
            `;
            
            lucide.createIcons();
        }

        document.getElementById('searchInput').addEventListener('input', render);
        document.getElementById('statusFilter').addEventListener('change', render);
        render(); // 초기 실행
    </script>
</body>
</html>