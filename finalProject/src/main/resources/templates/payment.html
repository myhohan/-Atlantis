<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>결제 관리 - LogiSystem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-7xl mx-auto px-4 py-8">
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">결제 관리</h1>
            <p class="text-gray-600">택배 요금 및 결제 내역을 확인하세요</p>
			<a href="/" class="flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors shadow-sm">
			        <i data-lucide="home" class="w-5 h-5"></i>
			        <span class="font-medium">return</span>
			    </a>
			</div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
            <div class="bg-white rounded-lg shadow-sm p-6">
                <div class="flex justify-between mb-2">
                    <span class="text-sm text-gray-600">총 결제금액 (예시)</span>
                    <i data-lucide="credit-card" class="w-5 h-5 text-blue-600"></i>
                </div>
                <div class="text-3xl font-bold text-gray-900">55,000원</div>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-sm overflow-hidden mb-6">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">송장번호</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">결제금액</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">결제방법</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">상태</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">접수일(결제일)</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    
                    <tr th:each="pay : ${paymentList}" class="hover:bg-gray-50">
                        
                        <td class="px-6 py-4 text-sm text-gray-900 font-mono" th:text="${pay.postNo}">PKG-001</td>
                        
                        <td class="px-6 py-4 text-sm font-semibold text-gray-900">
                            <span th:text="${pay.postWeight >= 10 ? '5,000원' : '3,000원'}">3,000원</span>
                        </td>
                        
                        <td class="px-6 py-4 text-sm text-gray-500">
                            카카오페이(카드)
                        </td>
                        
                        <td class="px-6 py-4">
                            <span th:if="${pay.isPayment == 'Y'}" 
                                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                결제완료
                            </span>
                            <span th:unless="${pay.isPayment == 'Y'}" 
                                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                미결제
                            </span>
                        </td>
                        
                        <td class="px-6 py-4 text-sm text-gray-500">
                             <span th:text="${#strings.length(pay.regDate) > 10 ? #strings.substring(pay.regDate, 0, 10) : pay.regDate}">2024-02-07</span>
                        </td>
                    </tr>
                    
                    <tr th:if="${#lists.isEmpty(paymentList)}">
                        <td colspan="5" class="px-6 py-10 text-center text-gray-500">
                            결제된 내역이 없습니다.
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="flex justify-center mt-8" 
             th:if="${!#lists.isEmpty(paymentList) and pagination != null}" 
             th:object="${pagination}">
             
            <nav class="isolate inline-flex -space-x-px rounded-md shadow-sm" aria-label="Pagination">
                
                <a th:href="@{/payment(cp=*{prevPage})}" 
                   class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
                    <span class="sr-only">Previous</span>
                    <i data-lucide="chevron-left" class="w-4 h-4"></i>
                </a>

                <th:block th:each="i : *{#numbers.sequence(startPage, endPage)}">
                    <span th:if="${i} == *{currentPage}" 
                          class="relative z-10 inline-flex items-center bg-blue-600 px-4 py-2 text-sm font-semibold text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600">
                        [[${i}]]
                    </span>
                    <a th:unless="${i} == *{currentPage}" 
                       th:href="@{/payment(cp=${i})}" 
                       class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
                        [[${i}]]
                    </a>
                </th:block>

                <a th:href="@{/payment(cp=*{nextPage})}" 
                   class="relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
                    <span class="sr-only">Next</span>
                    <i data-lucide="chevron-right" class="w-4 h-4"></i>
                </a>
            </nav>
        </div>
    </div>

    <script>
        lucide.createIcons();
    </script>
</body>
</html>